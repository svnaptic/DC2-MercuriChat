<!DOCTYPE html>
<!--
    File:   http://www.cs.uml.edu/~eseto/Data_Communications_II/index.html
    91.414 Data Communications II Project (MercuriChat)
    Emily Seto, Undergraduate Computer Science student at UMass Lowell, emily_seto@student.uml.edu
    Copyright (c) 2016 by Emily W. Seto. All rights reserved. May be freely copied or excerpted for
        educational purposes with credit to the author.
    The objective of this first assignment is to create an index for upcoming assignments in GUI.
    Updated by EWS on March 13, 2016 at 3:26 AM
-->
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<%= javascript_include_tag "dashboard" %>
	<title>MercuriChat</title>
	<%= javascript_include_tag "application" %>
	<%= javascript_include_tag "dashboard" %>
</head>
<body>
<!-- Navigation bar information from: http://getbootstrap.com/components/#navbar. -->
<nav class="navbar navbar-default navbar-static-top">
	<div class="container-fluid">
		<!-- Brand and toggle get grouped together for better mobile display. -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation.</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">MercuriChat</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling. -->
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<!-- Referenced from: https://getbootstrap.com/examples/dashboard/ -->
			<ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true">My Account <span class="caret" ></span></a>
                    <ul class="dropdown-menu">
                    	<li><%= link_to "My Profile", { controller: "users", action: "show", id: session[:user] }, method: "get" %></li>
						<li><a href="#">Settings</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="#">Sign Out</a></li>
                    </ul>
                </li>
                <li><a href="#">?</a></li>
            </ul>

			<!-- Will eventually allow users to search for other people using the client: -->
			<!--form class="navbar-form navbar-right" action=" " method=""-->
			<%= form_tag({controller: "users", action: "show", id: "id"}, method: "get", class: "navbar-form navbar-right") do %>
			<div class="searchbox">
        	<%= text_field_tag "find_friend", nil, class: "form-control", :placeholder => "Search..." %>
		    </div>
			<% end %>
			<!--/form-->
		</div>
	</div>
</nav><!-- End of navigation bar. -->

<!-- Beginning of cover page. -->
<div class="container-fluid">
	<div class="row">
		<!-- Referenced from: https://getbootstrap.com/examples/dashboard/ -->
		<!-- Beginning of Friends List: -->
		<div class="col-md-2 sidebar">
			<!-- Content of sidebar, i.e. friends' messages, go here! -->
			<ul class="nav nav-sidebar">
        <% unless !@friendlist %>
          <% @friendlist.each do |friend| %>
				  <li>
            <%= link_to "#{friend.first_name} #{friend.last_name}", conversation: "#{friend.id}" %>
          </li>
          <% end %>
        <% end %>
			</ul>
		</div><!-- End of Friends List. -->

		<!-- Beginning of messaging panel here: -->
		<div class="col-md-7 col-md-offset-3 msg">
			<div class="row">
				<!-- Beginning of message history panel: -->
				<div class="col-md-12" id="msg-history">
					<!--<pre id="output"></pre>-->
					<p id="msgOutput">

					</p>
				</div><!-- End of message history panel. -->

				<!-- Beginning of message send box. -->
				<div class="col-md-12" id="msg-send">
					<!-- Referenced from: http://getbootstrap.com/components/#input-groups-buttons -->
					<div class="input-group">
						<!-- Referenced from: http://stackoverflow.com/questions/13987300/how-to-trigger-enter-key-press-of-textbox -->
						<input id="inputMessage" type="text" class="form-control" placeholder="Enter your message here!" onkeydown="handleKeyPress(event)" >
						<span class="input-group-btn">
							<button id="sendButton" class="btn btn-default" type="button">Send!</button>
						</span>
					</div><!-- ./input-group -->
				</div><!-- End of message send box. -->
			</div>
		</div><!-- End of messaging panel here. -->
	</div>
</div>

</body>
</html>